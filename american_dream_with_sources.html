<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ONE YEAR - When the American Dream Tipped</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(180deg, #f8f9fa 0%, #e9ecef 100%);
      min-height: 100vh;
      color: #1a3a52;
    }
    
    header {
      background: linear-gradient(135deg, #1a3a52 0%, #2d4a5e 100%);
      color: white;
      padding: 32px 24px;
      text-align: center;
    }
    
    .logo {
      width: 72px;
      height: 72px;
      border-radius: 50%;
      background: white;
      color: #1a3a52;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 900;
      font-size: 28px;
      margin: 0 auto 16px;
      border: 3px solid #e67e22;
    }
    
    h1 { font-size: 32px; font-weight: 900; letter-spacing: -1px; margin-bottom: 8px; }
    .tagline { font-size: 15px; opacity: 0.9; }
    
    .container { max-width: 1200px; margin: 0 auto; padding: 24px; }
    
    .card {
      background: white;
      border-radius: 20px;
      padding: 28px;
      margin-bottom: 24px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.06);
    }
    
    .year-selector {
      width: 100%;
      padding: 16px 20px;
      font-size: 18px;
      font-weight: 700;
      border: 2px solid #1a3a52;
      border-radius: 12px;
      background: white;
      color: #1a3a52;
      cursor: pointer;
      font-family: inherit;
    }
    
    .scenarios {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 16px;
      margin-top: 24px;
    }
    
    .scenario-btn {
      padding: 24px;
      border: 3px solid #e0e0e0;
      border-radius: 16px;
      background: white;
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: left;
    }
    
    .scenario-btn:hover {
      border-color: #1a3a52;
      transform: translateY(-2px);
      box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    }
    
    .scenario-btn.active {
      border-color: #1a3a52;
      background: linear-gradient(135deg, #1a3a52 0%, #2d4a5e 100%);
      color: white;
    }
    
    .scenario-title {
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 8px;
    }
    
    .scenario-desc {
      font-size: 13px;
      opacity: 0.8;
      line-height: 1.5;
    }
    
    .scenario-workers {
      margin-top: 12px;
      font-size: 14px;
      font-weight: 600;
      padding: 8px 12px;
      background: rgba(0,0,0,0.05);
      border-radius: 8px;
      display: inline-block;
    }
    
    .scenario-btn.active .scenario-workers {
      background: rgba(255,255,255,0.2);
    }
    
    .result-box {
      background: linear-gradient(135deg, #37474f 0%, #263238 100%);
      color: white;
      border-radius: 16px;
      padding: 32px;
      text-align: center;
      margin-top: 24px;
    }
    
    .result-label {
      font-size: 14px;
      opacity: 0.8;
      margin-bottom: 12px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    
    .result-value {
      font-size: 48px;
      font-weight: 900;
      margin-bottom: 16px;
    }
    
    .result-value.success { color: #7cb342; }
    .result-value.warning { color: #e67e22; }
    .result-value.failure { color: #ef5350; }
    
    .result-message {
      font-size: 16px;
      line-height: 1.6;
      opacity: 0.9;
    }
    
    .breakdown {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 12px;
      margin-top: 24px;
    }
    
    .breakdown-item {
      background: #f5f5f5;
      border-radius: 12px;
      padding: 16px;
    }
    
    .breakdown-label {
      font-size: 12px;
      color: #546e7a;
      margin-bottom: 6px;
    }
    
    .breakdown-value {
      font-size: 20px;
      font-weight: 700;
      color: #1a3a52;
    }
    
    .timeline-viz {
      margin-top: 32px;
      padding: 24px;
      background: #f5f5f5;
      border-radius: 16px;
    }
    
    .timeline-title {
      font-size: 16px;
      font-weight: 700;
      margin-bottom: 20px;
      text-align: center;
    }
    
    .timeline-years {
      display: flex;
      justify-content: space-between;
      align-items: flex-end;
      height: 200px;
      margin-bottom: 12px;
    }
    
    .timeline-year {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }
    
    .timeline-bar {
      width: 60%;
      background: linear-gradient(180deg, #1976d2 0%, #1565c0 100%);
      border-radius: 8px 8px 0 0;
      transition: all 0.3s ease;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      padding: 8px;
      font-size: 11px;
      font-weight: 700;
      color: white;
    }
    
    .timeline-bar.success { background: linear-gradient(180deg, #7cb342 0%, #689f38 100%); }
    .timeline-bar.warning { background: linear-gradient(180deg, #e67e22 0%, #d35400 100%); }
    .timeline-bar.failure { background: linear-gradient(180deg, #ef5350 0%, #e53935 100%); }
    
    .timeline-label {
      font-size: 13px;
      font-weight: 600;
      color: #1a3a52;
    }
    
    .sources-box {
      background: #f5f5f5;
      border-radius: 12px;
      padding: 20px;
      margin-top: 16px;
    }
    
    .sources-title {
      font-size: 14px;
      font-weight: 700;
      color: #1a3a52;
      margin-bottom: 12px;
    }
    
    .source-links {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    
    .source-link {
      font-size: 12px;
      color: #1976d2;
      text-decoration: none;
      padding: 6px 12px;
      background: white;
      border-radius: 6px;
      transition: all 0.2s;
    }
    
    .source-link:hover {
      background: #e3f2fd;
      transform: translateY(-1px);
    }
    
    footer {
      text-align: center;
      padding: 32px 24px;
      background: #1a3a52;
      color: white;
      margin-top: 48px;
    }
    
    footer div { margin-bottom: 8px; font-size: 14px; }
    footer .motto { font-style: italic; opacity: 0.7; font-size: 13px; }
    footer a { color: #e67e22; text-decoration: none; }
    footer a:hover { text-decoration: underline; }
    
    .loading {
      text-align: center;
      padding: 48px;
      font-size: 18px;
      color: #546e7a;
    }
    
    @media (max-width: 768px) {
      h1 { font-size: 26px; }
      .result-value { font-size: 36px; }
      .timeline-years { height: 150px; }
      .scenarios { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">1Y</div>
    <h1>ONE YEAR</h1>
    <p class="tagline">When Did the American Dream Become Impossible?</p>
  </header>

  <div class="container" id="app">
    <div class="loading">Loading data...</div>
  </div>

  <footer>
    <div style="font-weight: 600; margin-bottom: 8px;">1Y = One Year of Work = Your Full Annual Salary</div>
    <div>All data sourced from authoritative federal agencies and academic research</div>
    <div><a href="ONE_YEAR_COMPLETE_DATA.json" target="_blank">üìÑ View Complete Data & Source Citations (JSON)</a></div>
    <div class="motto">This isn't opinion. It's math.</div>
  </footer>

  <script>
    let DATA = null;
    let currentYear = 2025;
    let currentScenario = 'oneIncome';

    // Load data
    fetch('ONE_YEAR_COMPLETE_DATA.json')
      .then(response => response.json())
      .then(data => {
        DATA = data;
        initApp();
      })
      .catch(error => {
        document.getElementById('app').innerHTML = `
          <div class="card">
            <h2 style="color: #d32f2f; margin-bottom: 16px;">Error Loading Data</h2>
            <p>Could not load ONE_YEAR_COMPLETE_DATA.json. Please ensure the file is in the same directory.</p>
            <p style="margin-top: 12px; font-size: 14px; color: #546e7a;">${error.message}</p>
          </div>
        `;
      });

    function getDataForYear(year) {
      const data = {};
      
      // Get income
      data.medianIncome = interpolate(DATA.incomeData.medianWorker.data, year);
      
      // Get prices
      data.house = interpolate(DATA.items.medianHome.data, year, 'price');
      data.annualRent = interpolate(DATA.items.annualRent.data, year, 'price');
      data.newCar = interpolate(DATA.items.newCar.data, year, 'price');
      data.usedCar = interpolate(DATA.items.usedCar.data, year, 'price');
      data.groceriesFamily4 = interpolate(DATA.items.groceriesFamily4.data, year, 'price');
      data.healthcare = interpolate(DATA.items.healthcare.data, year, 'price');
      data.utilities = interpolate(DATA.items.utilities.data, year, 'price');
      data.childcare = interpolate(DATA.items.childcare.data, year, 'price');
      data.studentLoanDebt = interpolate(DATA.items.studentLoanDebt.data, year, 'price');
      data.creditCardDebt = interpolate(DATA.items.creditCardDebt.data, year, 'price');
      
      return data;
    }

    function interpolate(dataObj, year, field = 'value') {
      const years = Object.keys(dataObj).map(Number).sort((a, b) => a - b);
      
      // Exact match
      if (dataObj[year]) {
        return dataObj[year][field] || dataObj[year].price || dataObj[year].value || 0;
      }
      
      // Find surrounding years
      let lower = years[0];
      let upper = years[years.length - 1];
      
      for (let i = 0; i < years.length - 1; i++) {
        if (years[i] <= year && years[i + 1] >= year) {
          lower = years[i];
          upper = years[i + 1];
          break;
        }
      }
      
      if (year < lower) return dataObj[lower][field] || dataObj[lower].price || dataObj[lower].value || 0;
      if (year > upper) return dataObj[upper][field] || dataObj[upper].price || dataObj[upper].value || 0;
      
      // Linear interpolation
      const lowerVal = dataObj[lower][field] || dataObj[lower].price || dataObj[lower].value || 0;
      const upperVal = dataObj[upper][field] || dataObj[upper].price || dataObj[upper].value || 0;
      const ratio = (year - lower) / (upper - lower);
      
      return lowerVal + (upperVal - lowerVal) * ratio;
    }

    function calculateScenario(year, scenario) {
      const data = getDataForYear(year);
      let income, expenses, breakdown;
      
      if (scenario === 'oneIncome') {
        income = data.medianIncome;
        expenses = data.house + data.usedCar + data.groceriesFamily4 + data.healthcare + data.utilities;
        breakdown = {
          'Income': income,
          'House Purchase': data.house,
          'Used Car': data.usedCar,
          'Groceries (Year)': data.groceriesFamily4,
          'Healthcare': data.healthcare,
          'Utilities': data.utilities
        };
      } else if (scenario === 'twoIncome') {
        income = data.medianIncome * 2;
        const childcareNeeded = (year >= 1970) ? data.childcare : 0;
        expenses = data.house + data.usedCar + data.newCar + data.groceriesFamily4 + data.healthcare + data.utilities + childcareNeeded;
        breakdown = {
          'Combined Income': income,
          'House Purchase': data.house,
          'Used Car (1st)': data.usedCar,
          'New Car (2nd)': data.newCar,
          'Childcare': childcareNeeded,
          'Groceries (Year)': data.groceriesFamily4,
          'Healthcare': data.healthcare,
          'Utilities': data.utilities
        };
      } else {
        income = data.medianIncome * 2;
        const childcareNeeded = data.childcare;
        expenses = data.annualRent + data.usedCar + data.groceriesFamily4 + data.healthcare + 
                   data.utilities + childcareNeeded + data.studentLoanDebt + data.creditCardDebt;
        breakdown = {
          'Combined Income': income,
          'Annual Rent': data.annualRent,
          'Used Car': data.usedCar,
          'Student Loans': data.studentLoanDebt,
          'Credit Card Debt': data.creditCardDebt,
          'Childcare': childcareNeeded,
          'Groceries (Year)': data.groceriesFamily4,
          'Healthcare': data.healthcare,
          'Utilities': data.utilities
        };
      }
      
      const yearsRequired = expenses / income;
      const remaining = income - expenses;
      
      return { income, expenses, yearsRequired, remaining, breakdown };
    }

    function selectScenario(scenario) {
      currentScenario = scenario;
      document.querySelectorAll('.scenario-btn').forEach(btn => btn.classList.remove('active'));
      document.getElementById('scenario-' + scenario).classList.add('active');
      updateCalculator();
    }

    function updateCalculator() {
      currentYear = parseInt(document.getElementById('year-select').value);
      const result = calculateScenario(currentYear, currentScenario);
      
      // Update result box
      const resultBox = document.getElementById('result-box');
      let statusClass = 'success';
      let statusMessage = 'Affordable! Surplus income available.';
      
      if (result.yearsRequired > 1.5) {
        statusClass = 'failure';
        statusMessage = 'Mathematically impossible without going into debt.';
      } else if (result.yearsRequired > 0.9) {
        statusClass = 'warning';
        statusMessage = 'Barely possible, but leaves no room for savings or emergencies.';
      }
      
      resultBox.innerHTML = `
        <div class="result-label">Years of Work Required</div>
        <div class="result-value ${statusClass}">${result.yearsRequired.toFixed(2)} years</div>
        <div class="result-message">${statusMessage}</div>
        <div style="margin-top: 20px; font-size: 18px;">
          <strong>Remaining:</strong> ${result.remaining >= 0 ? '+' : ''}$${result.remaining.toLocaleString()}
        </div>
      `;
      
      // Update breakdown
      const breakdownEl = document.getElementById('breakdown');
      breakdownEl.innerHTML = Object.entries(result.breakdown).map(([key, value]) => `
        <div class="breakdown-item">
          <div class="breakdown-label">${key}</div>
          <div class="breakdown-value">$${value.toLocaleString()}</div>
        </div>
      `).join('');
      
      // Update timeline
      updateTimeline();
      
      // Update sources
      updateSources();
    }

    function updateTimeline() {
      const years = [1950, 1970, 1980, 1990, 2000, 2010, 2025];
      const timeline = document.getElementById('timeline');
      
      timeline.innerHTML = years.map(year => {
        const result = calculateScenario(year, currentScenario);
        const height = Math.min(result.yearsRequired * 60, 180);
        
        let statusClass = 'success';
        if (result.yearsRequired > 1.5) statusClass = 'failure';
        else if (result.yearsRequired > 0.9) statusClass = 'warning';
        
        return `
          <div class="timeline-year">
            <div class="timeline-bar ${statusClass}" style="height: ${height}px;">
              ${result.yearsRequired.toFixed(1)}Y
            </div>
            <div class="timeline-label">${year}</div>
          </div>
        `;
      }).join('');
    }

    function updateSources() {
      const sourcesBox = document.getElementById('sources-box');
      
      // Collect relevant sources based on current scenario
      const sources = new Set();
      sources.add({ name: 'Census Bureau', url: 'https://www.census.gov/data/tables/time-series/demo/income-poverty/historical-income-households.html' });
      sources.add({ name: 'FRED Housing Data', url: 'https://fred.stlouisfed.org/series/MSPUS' });
      sources.add({ name: 'BLS Consumer Data', url: 'https://www.bls.gov/data/' });
      sources.add({ name: 'College Board', url: 'https://research.collegeboard.org/trends/college-pricing' });
      
      if (currentScenario === 'twoIncomeDebt') {
        sources.add({ name: 'Federal Student Aid', url: 'https://studentaid.gov/data-center/student/portfolio' });
        sources.add({ name: 'Federal Reserve Credit', url: 'https://www.federalreserve.gov/releases/g19/current/' });
      }
      
      const sourceLinks = Array.from(sources).map(s => 
        `<a href="${s.url}" target="_blank" class="source-link">${s.name} ‚Üó</a>`
      ).join('');
      
      sourcesBox.innerHTML = `
        <div class="sources-title">Data Sources for This Calculation:</div>
        <div class="source-links">${sourceLinks}</div>
      `;
    }

    function initApp() {
      const app = document.getElementById('app');
      
      app.innerHTML = `
        <div class="card">
          <h2 style="margin-bottom: 16px;">Choose Your Year</h2>
          <select class="year-selector" id="year-select" onchange="updateCalculator()">
            <option value="1950">1950 - Post-War Boom</option>
            <option value="1960">1960 - Golden Age</option>
            <option value="1970">1970 - Peak Affordability</option>
            <option value="1980">1980 - The Turning Point</option>
            <option value="1990">1990 - Two Incomes Normal</option>
            <option value="2000">2000 - Dot-Com Era</option>
            <option value="2010">2010 - Post-Recession</option>
            <option value="2020">2020 - Pandemic Era</option>
            <option value="2025" selected>2025 - Today</option>
          </select>
          
          <h2 style="margin-top: 32px; margin-bottom: 8px;">Choose Your Scenario</h2>
          <p style="color: #546e7a; margin-bottom: 16px; font-size: 14px;">
            What does it take to own a home and support a family of 4?
          </p>
          
          <div class="scenarios">
            <button class="scenario-btn active" onclick="selectScenario('oneIncome')" id="scenario-oneIncome">
              <div class="scenario-title">üè° Classic American Dream</div>
              <div class="scenario-desc">One worker supports family of 4, owns home, has transportation</div>
              <div class="scenario-workers">1 Income</div>
            </button>
            
            <button class="scenario-btn" onclick="selectScenario('twoIncome')" id="scenario-twoIncome">
              <div class="scenario-title">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Two-Income Family</div>
              <div class="scenario-desc">Both parents work, family of 4, own home, has transportation</div>
              <div class="scenario-workers">2 Incomes</div>
            </button>
            
            <button class="scenario-btn" onclick="selectScenario('twoIncomeDebt')" id="scenario-twoIncomeDebt">
              <div class="scenario-title">üí≥ Modern Reality</div>
              <div class="scenario-desc">Two incomes + student loans + credit card debt, trying to save for house</div>
              <div class="scenario-workers">2 Incomes + Debt</div>
            </button>
          </div>
        </div>

        <div class="card">
          <div class="result-box" id="result-box"></div>
          <div class="breakdown" id="breakdown"></div>
          <div class="sources-box" id="sources-box"></div>
        </div>

        <div class="card">
          <h2 style="margin-bottom: 8px;">üìà The Tipping Points</h2>
          <p style="color: #546e7a; margin-bottom: 16px; font-size: 14px;">
            When did each scenario become impossible?
          </p>
          <div class="timeline-viz">
            <div class="timeline-title">Years of Work Required by Era</div>
            <div class="timeline-years" id="timeline"></div>
          </div>
        </div>
      `;
      
      updateCalculator();
    }
  </script>
</body>
</html>
